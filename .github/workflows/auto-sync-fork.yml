name: Auto Sync Fork (NoWait-USER)

on:
  push:
    branches: 
      - main          # ë˜ëŠ” master
  workflow_dispatch:    # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  sync-fork-only:
    runs-on: ubuntu-latest
    timeout-minutes: 2    # ë§¤ìš° ë¹ ë¥´ë¯€ë¡œ 2ë¶„ì´ë©´ ì¶©ë¶„
    
    steps:
      - name: Sync Fork with GitHub CLI
        env:
          GH_TOKEN: ${{ secrets.FORK_PAT }}
        run: |
          echo "ğŸ”„ í¬í¬ ë™ê¸°í™” ì‹œì‘ ($(date))"
          echo "ğŸ“ ${{ github.repository }} â†’ oriNuguri25/NoWait_FE"
          
          # GitHub CLIë¡œ í¬í¬ ë™ê¸°í™” (í•µì‹¬ í•œ ì¤„!)
          gh repo sync oriNuguri25/NoWait_FE \
            --source ${{ github.repository }} \
            --branch main \
            --force
          
          echo "âœ… í¬í¬ ë™ê¸°í™” ì™„ë£Œ!"
          echo "ğŸš€ Vercelì´ ìë™ìœ¼ë¡œ ë³€ê²½ì‚¬í•­ì„ ê°ì§€í•˜ì—¬ ë°°í¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤."
          
      - name: Completion Summary
        if: success()
        run: |
          echo "ğŸ‰ ìë™í™” ì™„ë£Œ!"
          echo "ğŸ“Š ì²˜ë¦¬ëœ ì‘ì—…:"
          echo "   âœ… ì—…ìŠ¤íŠ¸ë¦¼ â†’ í¬í¬ ë™ê¸°í™”"
          echo "   â³ Vercel ìë™ ë°°í¬ (ì§„í–‰ ì¤‘)"
          echo ""
          echo "âš¡ ì „ì²´ ì†Œìš” ì‹œê°„: ì•½ 10-15ì´ˆ"
          
      - name: Handle Sync Failure
        if: failure()
        run: |  
          echo "âŒ í¬í¬ ë™ê¸°í™” ì‹¤íŒ¨"
          echo ""
          echo "ğŸ” ì²´í¬ í¬ì¸íŠ¸:"
          echo "1. FORK_PAT í† í° ìœ íš¨ì„± í™•ì¸"
          echo "2. í¬í¬ ë ˆí¬ì§€í† ë¦¬ëª… ì •í™•ì„± í™•ì¸"
          echo "3. í† í°ì˜ repo ê¶Œí•œ í™•ì¸"
          echo ""
          echo "ğŸ“ ì„¤ì • ìœ„ì¹˜: ì—…ìŠ¤íŠ¸ë¦¼ ë ˆí¬ì§€í† ë¦¬ â†’ Settings â†’ Secrets â†’ FORK_PAT"
